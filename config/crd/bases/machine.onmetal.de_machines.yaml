---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.13.0
  name: machines.machine.onmetal.de
spec:
  group: machine.onmetal.de
  names:
    kind: Machine
    listKind: MachineList
    plural: machines
    singular: machine
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.network.asn
      name: ASN
      type: string
    - jsonPath: .status.health
      name: Healthy
      type: string
    - jsonPath: .status.network.redundancy
      name: Redundancy
      type: string
    - jsonPath: .status.reservation.status
      name: Reservation Status
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha3
    schema:
      openAPIV3Schema:
        description: Machine - is the data structure for a Machine resource. It contains
          an aggregated information from Inventory and OOB resources.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MachineSpec - defines the desired spec of Machine.
            properties:
              description:
                description: Description - summary info about machine
                type: string
              hostname:
                description: Hostname - defines machine domain name
                type: string
              identity:
                description: Identity - defines machine hardware info
                properties:
                  asset:
                    type: string
                  internal:
                    description: Deprecated
                    items:
                      properties:
                        name:
                          type: string
                        value:
                          type: string
                      type: object
                    type: array
                  serial_number:
                    description: SerialNumber - unique machine number
                    type: string
                  sku:
                    description: SKU - stock keeping unit. The label allows vendors
                      automatically track the movement of inventory
                    type: string
                type: object
              inventory_requested:
                description: InventoryRequested - defines if inventory requested or
                  not
                type: boolean
            type: object
          status:
            description: MachineStatus - defines machine aggregated info.
            properties:
              health:
                description: Health - defines machine condition. "healthy" if both
                  OOB and Inventory are presented and "unhealthy" if one of them isn't
                type: string
              network:
                description: Network - defines machine network status
                properties:
                  asn:
                    description: ASN - defines calculated Autonomous system Number.
                    format: int32
                    type: integer
                  interfaces:
                    description: Interfaces - defines machine interfaces info
                    items:
                      description: Interface - defines information about machine interfaces.
                      properties:
                        addresses:
                          description: IPv4 - defines machine IPv4 address
                          properties:
                            ipv4:
                              items:
                                description: IPAddressSpec defines interface's ip
                                  address info.
                                type: string
                              type: array
                            ipv6:
                              items:
                                description: IPAddressSpec defines interface's ip
                                  address info.
                                type: string
                              type: array
                          type: object
                        lanes:
                          description: Lane - defines number of lines per interface
                          format: int32
                          type: integer
                        moved:
                          description: Moved  - defines if interface was reconnected
                            to another switch or not
                          type: boolean
                        name:
                          description: Name - machine interface name
                          type: string
                        peer:
                          description: Peer - defines lldp peer info.
                          properties:
                            lldp_chassis_id:
                              description: LLDPChassisID - defines switch ID for chassis
                                obtained from Link Layer Discovery Protocol
                              type: string
                            lldp_port_description:
                              description: LLDPPortDescription - defines switch definition
                                obtained from Link Layer Discovery Protocol
                              type: string
                            lldp_port_id:
                              description: LLDPPortID - defines switch port ID obtained
                                from Link Layer Discovery Protocol
                              type: string
                            lldp_system_name:
                              description: LLDPSystemName - defines switch name obtained
                                from Link Layer Discovery Protocol layer 2 neighbor
                                discovery protocol
                              type: string
                            resource_reference:
                              description: ResourceReference refers to the related
                                resource definition
                              properties:
                                apiVersion:
                                  description: APIVersion refers to the resource API
                                    version
                                  type: string
                                kind:
                                  description: Kind refers to the resource kind
                                  type: string
                                name:
                                  description: Name refers to the resource name
                                  type: string
                                namespace:
                                  description: Namespace refers to the resource namespace
                                  type: string
                              type: object
                          type: object
                        switch_reference:
                          description: SwitchReference - defines unique switch identification
                          properties:
                            apiVersion:
                              description: APIVersion refers to the resource API version
                              type: string
                            kind:
                              description: Kind refers to the resource kind
                              type: string
                            name:
                              description: Name refers to the resource name
                              type: string
                            namespace:
                              description: Namespace refers to the resource namespace
                              type: string
                          type: object
                        unknown:
                          description: Unknown - defines information availability
                            about interface
                          type: boolean
                      type: object
                    type: array
                  loopback_addresses:
                    description: Loopbacks refers to the switch's loopback addresses
                    properties:
                      ipv4:
                        description: IPAddressSpec defines interface's ip address
                          info.
                        type: string
                      ipv6:
                        description: IPAddressSpec defines interface's ip address
                          info.
                        type: string
                    type: object
                  ports:
                    description: Ports - defines number of machine ports
                    type: integer
                  redundancy:
                    description: 'Redundancy - defines machine redundancy status.
                      Available values: "Single", "HighAvailability" or "None"'
                    pattern: ^(?:Single|HighAvailability|None)$
                    type: string
                  unknown_ports:
                    description: UnknownPorts - defines number of machine interface
                      without info
                    type: integer
                type: object
              orphaned:
                description: Orphaned - defines machine condition whether OOB or Inventory
                  is missing or not
                type: boolean
              reboot:
                description: Reboot - defines machine reboot status
                type: string
              reservation:
                description: Reservation - defines machine reservation state and reference
                  object.
                properties:
                  class:
                    description: Class - defines what class the mahchine was reserved
                      under
                    type: string
                  reference:
                    description: Reference - defines underlying referenced object.
                    properties:
                      apiVersion:
                        description: APIVersion refers to the resource API version
                        type: string
                      kind:
                        description: Kind refers to the resource kind
                        type: string
                      name:
                        description: Name refers to the resource name
                        type: string
                      namespace:
                        description: Namespace refers to the resource namespace
                        type: string
                    type: object
                  status:
                    description: Status - defines Machine Order state provided by
                      OOB Machine Resources
                    type: string
                type: object
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
