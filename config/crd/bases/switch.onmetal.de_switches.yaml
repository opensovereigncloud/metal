
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: switches.switch.onmetal.de
spec:
  group: switch.onmetal.de
  names:
    kind: Switch
    listKind: SwitchList
    plural: switches
    shortNames:
    - sw
    singular: switch
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Switch's hostname
      jsonPath: .spec.hostname
      name: Hostname
      type: string
    - description: OS running on switch
      jsonPath: .spec.distro.os
      name: OS
      type: string
    - description: Total amount of non-management network interfaces
      jsonPath: .spec.switchPorts
      name: SwitchPorts
      type: integer
    - description: switch's role
      jsonPath: .status.role
      name: Role
      type: string
    - description: Vertical level of switch connection
      jsonPath: .status.connectionLevel
      name: ConnectionLevel
      type: integer
    - description: South IPv4 subnet
      jsonPath: .spec.southSubnetV4.cidr
      name: SouthSubnetV4
      type: string
    - description: South IPv6 subnet
      jsonPath: .spec.southSubnetV6.cidr
      name: SouthSubnetV6
      type: string
    - description: Request for scan ports
      jsonPath: .status.scanPorts
      name: ScanPorts
      type: boolean
    - description: Switch processing state
      jsonPath: .status.state
      name: State
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Switch is the Schema for the switches API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: SwitchSpec defines the desired state of Switch
            properties:
              chassis:
                description: SwitchChassis referring to switch hardware information
                properties:
                  chassisId:
                    description: ChassisID referring to switch chassis ID advertising
                      via LLDP
                    type: string
                  manufacturer:
                    description: Manufacturer referring to switch chassis manufacturer
                    type: string
                  serial:
                    description: Serial referring to switch chassis serial number
                    type: string
                  sku:
                    description: SKU
                    type: string
                type: object
              distro:
                description: SwitchDistro referring to switch OS information
                properties:
                  asic:
                    description: ASIC
                    type: string
                  os:
                    description: OS referring to switch operating system
                    type: string
                  version:
                    description: Version referring to switch OS version
                    type: string
                type: object
              hostname:
                description: Hostname
                type: string
              interfaces:
                additionalProperties:
                  description: InterfaceSpec defines switch's network interface details
                  properties:
                    fec:
                      description: FEC referring to error correction method
                      enum:
                      - None
                      - BaseR
                      - RS
                      type: string
                    ipv4:
                      description: IPv4 referring to interface's IPv4 address
                      type: string
                    ipv6:
                      description: IPv6 referring to interface's IPv6 address
                      type: string
                    lanes:
                      description: Lanes referring to how many lanes are used by the
                        interface based on it's speed
                      type: integer
                    macAddress:
                      description: MacAddress referring to interface's MAC address
                      type: string
                    ndp:
                      description: Ndp flag defines whether ndp data received from
                        neighbour and it is in Reachable state
                      type: boolean
                    peerChassisId:
                      description: PeerChassisID
                      type: string
                    peerPortDescription:
                      description: PeerPortDescription
                      type: string
                    peerPortId:
                      description: PeerPortID
                      type: string
                    peerSystemName:
                      description: PeerSystemName
                      type: string
                    peerType:
                      description: PeerType referring to neighbour type
                      enum:
                      - Machine
                      - Switch
                      type: string
                  required:
                  - ndp
                  type: object
                description: Interfaces referring to details about network interfaces
                type: object
              location:
                description: Location referring to the switch location
                properties:
                  hu:
                    description: HU referring to height in units
                    type: integer
                  rack:
                    description: Rack referring to rack number
                    type: integer
                  room:
                    description: Room referring to room name
                    type: string
                  row:
                    description: Row referring to row number
                    type: integer
                type: object
              southSubnetV4:
                description: SouthSubnet referring to south IPv4 subnet
                nullable: true
                properties:
                  cidr:
                    description: CIDR referring to the assigned subnet
                    type: string
                  parentSubnet:
                    description: ParentSubnet referring to the subnet resource namespaced
                      name where CIDR was booked
                    properties:
                      name:
                        description: Name referring to the subnet resource name where
                          CIDR was booked
                        type: string
                      namespace:
                        description: Namespace referring to the subnet resource name
                          where CIDR was booked
                        type: string
                    type: object
                type: object
              southSubnetV6:
                description: SouthSubnet referring to south IPv6 subnet
                nullable: true
                properties:
                  cidr:
                    description: CIDR referring to the assigned subnet
                    type: string
                  parentSubnet:
                    description: ParentSubnet referring to the subnet resource namespaced
                      name where CIDR was booked
                    properties:
                      name:
                        description: Name referring to the subnet resource name where
                          CIDR was booked
                        type: string
                      namespace:
                        description: Namespace referring to the subnet resource name
                          where CIDR was booked
                        type: string
                    type: object
                type: object
              switchPorts:
                description: SwitchPorts referring to non-management network interfaces
                  count
                format: int64
                type: integer
              totalPorts:
                description: TotalPorts referring to network interfaces total count
                format: int64
                type: integer
            required:
            - chassis
            - hostname
            - switchPorts
            - totalPorts
            type: object
          status:
            description: SwitchStatus defines the observed state of Switch
            properties:
              connectionLevel:
                description: ConnectionLevel refers the level of the connection
                maximum: 255
                minimum: 0
                type: integer
              northConnections:
                description: NorthSwitches refers to up-level switch
                properties:
                  count:
                    description: Count refers to upstream switches count
                    type: integer
                  peers:
                    additionalProperties:
                      description: PeerSpec defines switch connected to another switch
                      properties:
                        chassisId:
                          description: ChassisID refers to switch's chassis id
                          type: string
                        name:
                          description: Name refers to switch's name
                          type: string
                        namespace:
                          description: Namespace refers to switch's namespace
                          type: string
                        portName:
                          description: PortName
                          type: string
                        type:
                          description: Type referring to neighbour type
                          enum:
                          - Machine
                          - Switch
                          type: string
                      required:
                      - chassisId
                      type: object
                    description: Peers refers to connected upstream switches
                    type: object
                type: object
              role:
                description: 'Role referring to switch''s role: leaf or spine'
                enum:
                - Leaf
                - Spine
                type: string
              scanPorts:
                description: ScanPorts flag determining whether scanning of ports
                  is requested
                type: boolean
              southConnections:
                description: SouthSwitches refers to down-level switch
                properties:
                  count:
                    description: Count refers to upstream switches count
                    type: integer
                  peers:
                    additionalProperties:
                      description: PeerSpec defines switch connected to another switch
                      properties:
                        chassisId:
                          description: ChassisID refers to switch's chassis id
                          type: string
                        name:
                          description: Name refers to switch's name
                          type: string
                        namespace:
                          description: Namespace refers to switch's namespace
                          type: string
                        portName:
                          description: PortName
                          type: string
                        type:
                          description: Type referring to neighbour type
                          enum:
                          - Machine
                          - Switch
                          type: string
                      required:
                      - chassisId
                      type: object
                    description: Peers refers to connected upstream switches
                    type: object
                type: object
              state:
                description: State referring to current switch state
                type: string
            required:
            - connectionLevel
            - role
            - scanPorts
            - state
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
