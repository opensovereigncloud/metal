
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.4.1
  creationTimestamp: null
  name: switches.switch.onmetal.de
spec:
  group: switch.onmetal.de
  names:
    kind: Switch
    listKind: SwitchList
    plural: switches
    shortNames:
    - sw
    singular: switch
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Switch's hostname
      jsonPath: .spec.hostname
      name: Hostname
      type: string
    - description: OS running on switch
      jsonPath: .spec.distro.os
      name: OS
      type: string
    - description: Total amount of non-management network interfaces
      jsonPath: .spec.switchPorts
      name: SwitchPorts
      type: integer
    - description: switch's role
      jsonPath: .status.role
      name: Role
      type: string
    - description: Vertical level of switch connection
      jsonPath: .status.connectionLevel
      name: ConnectionLevel
      type: integer
    - description: South IPv4 subnet
      jsonPath: .status.southSubnetV4.cidr
      name: SouthSubnetV4
      type: string
    - description: South IPv6 subnet
      jsonPath: .status.southSubnetV6.cidr
      name: SouthSubnetV6
      type: string
    - description: Request for scan ports
      jsonPath: .status.scanPorts
      name: ScanPorts
      type: boolean
    - description: Switch processing state
      jsonPath: .status.state
      name: State
      type: string
    - description: Switch manager type
      jsonPath: .status.configuration.type
      name: Manager
      type: string
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Switch is the Schema for the switches API
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: SwitchSpec defines the desired state of Switch
            properties:
              chassis:
                description: SwitchChassis refers to switch hardware information
                properties:
                  chassisId:
                    description: ChassisID refers to switch chassis ID advertising
                      via LLDP
                    type: string
                  manufacturer:
                    description: Manufacturer refers to switch chassis manufacturer
                    type: string
                  serial:
                    description: Serial refers to switch chassis serial number
                    type: string
                  sku:
                    description: SKU
                    type: string
                type: object
              distro:
                description: SwitchDistro refers to switch OS information
                properties:
                  asic:
                    description: ASIC
                    type: string
                  os:
                    description: OS refers to switch operating system
                    type: string
                  version:
                    description: Version refers to switch OS version
                    type: string
                type: object
              hostname:
                description: Hostname
                type: string
              interfaces:
                additionalProperties:
                  description: InterfaceSpec defines switch's network interface details
                  properties:
                    fec:
                      description: FEC refers to error correction method
                      enum:
                      - none
                      - rs
                      - fc
                      type: string
                    ipv4:
                      description: IPv4 refers to interface's IPv4 address
                      type: string
                    ipv6:
                      description: IPv6 refers to interface's IPv6 address
                      type: string
                    lanes:
                      description: Lanes refers to how many lanes are used by the
                        interface based on its speed
                      type: integer
                    macAddress:
                      description: MacAddress refers to interface's MAC address
                      type: string
                    mtu:
                      description: MTU is refers to Maximum Transmission Unit
                      minimum: 1
                      type: integer
                    peerChassisId:
                      description: PeerChassisID
                      type: string
                    peerPortDescription:
                      description: PeerPortDescription
                      type: string
                    peerPortId:
                      description: PeerPortID
                      type: string
                    peerSystemName:
                      description: PeerSystemName
                      type: string
                    peerType:
                      description: PeerType refers to neighbour type
                      enum:
                      - Machine
                      - Switch
                      type: string
                    speed:
                      description: Speed refers to current interface speed
                      format: int32
                      type: integer
                  required:
                  - speed
                  type: object
                description: Interfaces refers to details about network interfaces
                type: object
              ipv4:
                description: IPv4 refers to switch's loopback v4 address
                type: string
              ipv6:
                description: IPv6 refers to switch's loopback v6 address
                type: string
              location:
                description: Location refers to the switch location
                properties:
                  hu:
                    description: HU refers to height in units
                    type: integer
                  rack:
                    description: Rack refers to rack number
                    type: integer
                  room:
                    description: Room refers to room name
                    type: string
                  row:
                    description: Row refers to row number
                    type: integer
                type: object
              switchPorts:
                description: SwitchPorts refers to non-management network interfaces
                  count
                format: int64
                type: integer
              totalPorts:
                description: TotalPorts refers to network interfaces total count
                format: int64
                type: integer
            required:
            - chassis
            - hostname
            - switchPorts
            - totalPorts
            type: object
          status:
            description: SwitchStatus defines the observed state of Switch
            properties:
              configuration:
                description: Configuration refers to current config management state
                properties:
                  lastCheck:
                    description: LastCheck refers to time of the last configuration
                      check
                    type: string
                  managed:
                    description: Managed refers to management state
                    type: boolean
                  type:
                    description: Type refers to management type
                    type: string
                required:
                - lastCheck
                - managed
                - type
                type: object
              connectionLevel:
                description: ConnectionLevel refers the level of the connection
                maximum: 255
                minimum: 0
                type: integer
              lags:
                additionalProperties:
                  description: LagSpec defines link aggregation config
                  properties:
                    fallback:
                      description: Fallback refers to fallback flag
                      type: boolean
                    ipv4:
                      description: IPv4 refers to interface's IPv4 address
                      type: string
                    ipv6:
                      description: IPv6 refers to interface's IPv6 address
                      type: string
                    members:
                      description: Members refers to the aggregation members names
                      items:
                        type: string
                      type: array
                  required:
                  - fallback
                  - members
                  type: object
                description: LAGs refers to existing link aggregations
                nullable: true
                type: object
              northConnections:
                description: NorthSwitches refers to up-level switch
                properties:
                  count:
                    description: Count refers to upstream switches count
                    type: integer
                  peers:
                    additionalProperties:
                      description: PeerSpec defines switch connected to another switch
                      properties:
                        chassisId:
                          description: ChassisID refers to switch's chassis id
                          type: string
                        name:
                          description: Name refers to switch's name
                          type: string
                        namespace:
                          description: Namespace refers to switch's namespace
                          type: string
                        portName:
                          description: PortName
                          type: string
                        type:
                          description: Type refers to neighbour type
                          enum:
                          - Machine
                          - Switch
                          type: string
                      required:
                      - chassisId
                      type: object
                    description: Peers refers to connected upstream switches
                    type: object
                type: object
              role:
                description: 'Role refers to switch''s role: leaf or spine'
                enum:
                - Leaf
                - Spine
                type: string
              scanPorts:
                description: ScanPorts flag determining whether scanning of ports
                  is requested
                type: boolean
              southConnections:
                description: SouthSwitches refers to down-level switch
                properties:
                  count:
                    description: Count refers to upstream switches count
                    type: integer
                  peers:
                    additionalProperties:
                      description: PeerSpec defines switch connected to another switch
                      properties:
                        chassisId:
                          description: ChassisID refers to switch's chassis id
                          type: string
                        name:
                          description: Name refers to switch's name
                          type: string
                        namespace:
                          description: Namespace refers to switch's namespace
                          type: string
                        portName:
                          description: PortName
                          type: string
                        type:
                          description: Type refers to neighbour type
                          enum:
                          - Machine
                          - Switch
                          type: string
                      required:
                      - chassisId
                      type: object
                    description: Peers refers to connected upstream switches
                    type: object
                type: object
              southSubnetV4:
                description: SouthSubnet refers to south IPv4 subnet
                nullable: true
                properties:
                  cidr:
                    description: CIDR refers to the assigned subnet
                    type: string
                  parentSubnet:
                    description: ParentSubnet refers to the subnet resource namespaced
                      name where CIDR was booked
                    properties:
                      availabilityZones:
                        description: AvailabilityZones refers to parent subnet availability
                          zones
                        items:
                          type: string
                        type: array
                      name:
                        description: Name refers to the subnet resource name where
                          CIDR was booked
                        type: string
                      namespace:
                        description: Namespace refers to the subnet resource name
                          where CIDR was booked
                        type: string
                      regions:
                        description: Regions refers to parent subnet regions
                        items:
                          type: string
                        type: array
                    type: object
                type: object
              southSubnetV6:
                description: SouthSubnet refers to south IPv6 subnet
                nullable: true
                properties:
                  cidr:
                    description: CIDR refers to the assigned subnet
                    type: string
                  parentSubnet:
                    description: ParentSubnet refers to the subnet resource namespaced
                      name where CIDR was booked
                    properties:
                      availabilityZones:
                        description: AvailabilityZones refers to parent subnet availability
                          zones
                        items:
                          type: string
                        type: array
                      name:
                        description: Name refers to the subnet resource name where
                          CIDR was booked
                        type: string
                      namespace:
                        description: Namespace refers to the subnet resource name
                          where CIDR was booked
                        type: string
                      regions:
                        description: Regions refers to parent subnet regions
                        items:
                          type: string
                        type: array
                    type: object
                type: object
              state:
                description: State refers to current switch state
                type: string
            required:
            - connectionLevel
            - role
            - scanPorts
            - state
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
