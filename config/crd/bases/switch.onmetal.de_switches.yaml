---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.8.0
  creationTimestamp: null
  name: switches.switch.onmetal.de
spec:
  group: switch.onmetal.de
  names:
    kind: Switch
    listKind: SwitchList
    plural: switches
    shortNames:
    - sw
    singular: switch
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Total amount of non-management network interfaces
      jsonPath: .status.switchPorts
      name: Ports
      type: integer
    - description: switch's role
      jsonPath: .status.role
      name: Role
      type: string
    - description: Vertical level of switch connection
      jsonPath: .status.connectionLevel
      name: Connection Level
      type: integer
    - description: Switch state
      jsonPath: .status.switch.state
      name: Switch State
      type: string
    - description: Switch state message. Reports about any issues duiring reconciliation
        process
      jsonPath: .status.switch.message
      name: Message
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: Switch is the Schema for switches API.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: SwitchSpec contains desired state of resulting Switch configuration
            properties:
              cordon:
                default: false
                description: Cordon is a flag defining whether Switch object is taken
                  offline
                type: boolean
              interfaces:
                description: Interfaces contains general configuration for all switch
                  ports
                properties:
                  defaults:
                    description: Defaults contains switch port parameters which will
                      be applied to all ports of the switches
                    properties:
                      fec:
                        description: FEC refers to forward error correction method
                          which should be applied on switch port
                        enum:
                        - rs
                        - none
                        type: string
                      ipv4MaskLength:
                        description: IPv4MaskLength defines prefix of subnet where
                          switch port's IPv4 address should be reserved
                        maximum: 32
                        minimum: 1
                        type: integer
                      ipv6Prefix:
                        description: IPv6Prefix defines prefix of subnet where switch
                          port's IPv6 address should be reserved
                        maximum: 128
                        minimum: 1
                        type: integer
                      lanes:
                        description: Lanes refers to a number of lanes used by switch
                          port
                        maximum: 8
                        minimum: 1
                        type: integer
                      mtu:
                        description: MTU refers to maximum transmission unit value
                          which should be applied on switch port
                        maximum: 65535
                        minimum: 84
                        type: integer
                      state:
                        description: State defines default state of switch port
                        enum:
                        - up
                        - down
                        type: string
                    type: object
                  overrides:
                    description: Overrides contains set of parameters which should
                      be overridden for listed switch ports
                    items:
                      description: InterfaceOverridesSpec contains overridden parameters
                        for certain switch port
                      properties:
                        fec:
                          description: FEC refers to forward error correction method
                            which should be applied on switch port
                          enum:
                          - rs
                          - none
                          type: string
                        ip:
                          description: IP contains a list of additional IP addresses
                            for interface
                          items:
                            description: AdditionalIPSpec defines IP address and selector
                              for subnet where address should be reserved
                            properties:
                              address:
                                description: Address contains additional IP address
                                  that should be assigned to the interface
                                type: string
                              parentSubnet:
                                description: ParentSubnet contains label selector
                                  to pick up IPAM objects
                                properties:
                                  matchExpressions:
                                    description: matchExpressions is a list of label
                                      selector requirements. The requirements are
                                      ANDed.
                                    items:
                                      description: A label selector requirement is
                                        a selector that contains values, a key, and
                                        an operator that relates the key and values.
                                      properties:
                                        key:
                                          description: key is the label key that the
                                            selector applies to.
                                          type: string
                                        operator:
                                          description: operator represents a key's
                                            relationship to a set of values. Valid
                                            operators are In, NotIn, Exists and DoesNotExist.
                                          type: string
                                        values:
                                          description: values is an array of string
                                            values. If the operator is In or NotIn,
                                            the values array must be non-empty. If
                                            the operator is Exists or DoesNotExist,
                                            the values array must be empty. This array
                                            is replaced during a strategic merge patch.
                                          items:
                                            type: string
                                          type: array
                                      required:
                                      - key
                                      - operator
                                      type: object
                                    type: array
                                  matchLabels:
                                    additionalProperties:
                                      type: string
                                    description: matchLabels is a map of {key,value}
                                      pairs. A single {key,value} in the matchLabels
                                      map is equivalent to an element of matchExpressions,
                                      whose key field is "key", the operator is "In",
                                      and the values array contains only "value".
                                      The requirements are ANDed.
                                    type: object
                                type: object
                            type: object
                          type: array
                        lanes:
                          description: Lanes refers to a number of lanes used by switch
                            port
                          maximum: 8
                          minimum: 1
                          type: integer
                        mtu:
                          description: MTU refers to maximum transmission unit value
                            which should be applied on switch port
                          maximum: 65535
                          minimum: 84
                          type: integer
                        name:
                          description: Name refers to switch port name
                          type: string
                        state:
                          description: State defines default state of switch port
                          enum:
                          - up
                          - down
                          type: string
                      type: object
                    type: array
                  scan:
                    default: true
                    description: Scan is a flag defining whether to run periodical
                      scanning on switch ports
                    type: boolean
                type: object
              ipam:
                description: IPAM refers to selectors for subnets which will be used
                  for Switch object
                properties:
                  loopbackAddresses:
                    description: LoopbackAddresses defines selector for IP object
                      which will be assigned to switch's loopback interface
                    properties:
                      addressFamilies:
                        description: AddressFamilies defines what ip address families
                          should be claimed
                        properties:
                          ipv4:
                            default: true
                            description: IPv4 is a flag defining whether IPv4 is used
                              or not
                            type: boolean
                          ipv6:
                            default: true
                            description: IPv6 is a flag defining whether IPv6 is used
                              or not
                            type: boolean
                        type: object
                      fieldSelector:
                        description: FieldSelector contains label key and field path
                          where to get label value for search. If FieldSelector is
                          used as part of IPAM configuration in SwitchConfig object
                          it will reference to the field path in related object. If
                          FieldSelector is used as part of IPAM configuration in Switch
                          object, it will reference to the field path in the same
                          object
                        properties:
                          fieldRef:
                            description: FieldRef contains reference to the field
                              of resource where to get label's value
                            properties:
                              apiVersion:
                                description: Version of the schema the FieldPath is
                                  written in terms of, defaults to "v1".
                                type: string
                              fieldPath:
                                description: Path of the field to select in the specified
                                  API version.
                                type: string
                            required:
                            - fieldPath
                            type: object
                          labelKey:
                            description: LabelKey contains label key
                            type: string
                        type: object
                      labelSelector:
                        description: LabelSelector contains label selector to pick
                          up IPAM objects
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: A label selector requirement is a selector
                                that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: operator represents a key's relationship
                                    to a set of values. Valid operators are In, NotIn,
                                    Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: values is an array of string values.
                                    If the operator is In or NotIn, the values array
                                    must be non-empty. If the operator is Exists or
                                    DoesNotExist, the values array must be empty.
                                    This array is replaced during a strategic merge
                                    patch.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: matchLabels is a map of {key,value} pairs.
                              A single {key,value} in the matchLabels map is equivalent
                              to an element of matchExpressions, whose key field is
                              "key", the operator is "In", and the values array contains
                              only "value". The requirements are ANDed.
                            type: object
                        type: object
                    type: object
                  southSubnets:
                    description: SouthSubnets defines selector for subnet object which
                      will be assigned to switch
                    properties:
                      addressFamilies:
                        description: AddressFamilies defines what ip address families
                          should be claimed
                        properties:
                          ipv4:
                            default: true
                            description: IPv4 is a flag defining whether IPv4 is used
                              or not
                            type: boolean
                          ipv6:
                            default: true
                            description: IPv6 is a flag defining whether IPv6 is used
                              or not
                            type: boolean
                        type: object
                      fieldSelector:
                        description: FieldSelector contains label key and field path
                          where to get label value for search. If FieldSelector is
                          used as part of IPAM configuration in SwitchConfig object
                          it will reference to the field path in related object. If
                          FieldSelector is used as part of IPAM configuration in Switch
                          object, it will reference to the field path in the same
                          object
                        properties:
                          fieldRef:
                            description: FieldRef contains reference to the field
                              of resource where to get label's value
                            properties:
                              apiVersion:
                                description: Version of the schema the FieldPath is
                                  written in terms of, defaults to "v1".
                                type: string
                              fieldPath:
                                description: Path of the field to select in the specified
                                  API version.
                                type: string
                            required:
                            - fieldPath
                            type: object
                          labelKey:
                            description: LabelKey contains label key
                            type: string
                        type: object
                      labelSelector:
                        description: LabelSelector contains label selector to pick
                          up IPAM objects
                        properties:
                          matchExpressions:
                            description: matchExpressions is a list of label selector
                              requirements. The requirements are ANDed.
                            items:
                              description: A label selector requirement is a selector
                                that contains values, a key, and an operator that
                                relates the key and values.
                              properties:
                                key:
                                  description: key is the label key that the selector
                                    applies to.
                                  type: string
                                operator:
                                  description: operator represents a key's relationship
                                    to a set of values. Valid operators are In, NotIn,
                                    Exists and DoesNotExist.
                                  type: string
                                values:
                                  description: values is an array of string values.
                                    If the operator is In or NotIn, the values array
                                    must be non-empty. If the operator is Exists or
                                    DoesNotExist, the values array must be empty.
                                    This array is replaced during a strategic merge
                                    patch.
                                  items:
                                    type: string
                                  type: array
                              required:
                              - key
                              - operator
                              type: object
                            type: array
                          matchLabels:
                            additionalProperties:
                              type: string
                            description: matchLabels is a map of {key,value} pairs.
                              A single {key,value} in the matchLabels map is equivalent
                              to an element of matchExpressions, whose key field is
                              "key", the operator is "In", and the values array contains
                              only "value". The requirements are ANDed.
                            type: object
                        type: object
                    type: object
                type: object
              managed:
                default: true
                description: Managed is a flag defining whether Switch object would
                  be processed during reconciliation
                type: boolean
              topSpine:
                default: false
                description: TopSpine is a flag defining whether Switch is a top-level
                  spine switch
                type: boolean
              uuid:
                description: UUID is a unique system identifier
                type: string
            required:
            - cordon
            - managed
            - topSpine
            - uuid
            type: object
          status:
            description: SwitchStatus contains observed state of Switch
            properties:
              agent:
                description: ConfigAgent contains information about current state
                  of configuration agent running on the switch
                properties:
                  lastCheck:
                    description: LastCheck refers to the last timestamp when configuration
                      was applied
                    type: string
                  message:
                    description: Message contains a brief description of the current
                      state
                    type: string
                  state:
                    description: State is the current state of corresponding object
                      or process
                    enum:
                    - active
                    - failed
                    type: string
                type: object
              connectionLevel:
                description: ConnectionLevel refers to switch's current position in
                  connection hierarchy
                type: integer
              interfaces:
                additionalProperties:
                  description: InterfaceSpec defines the state of switch's interface
                  properties:
                    direction:
                      description: Direction refers to the interface's connection
                        'direction'
                      enum:
                      - north
                      - south
                      type: string
                    fec:
                      description: FEC refers to the current interface's forward error
                        correction type
                      enum:
                      - none
                      - rs
                      - fc
                      type: string
                    ip:
                      description: IP contains a list of IP addresses that are assigned
                        to interface
                      items:
                        description: IPAddressSpec defines interface's ip address
                          info
                        properties:
                          address:
                            description: Address refers to the ip address value
                            type: string
                          extraAddress:
                            default: false
                            description: ExtraAddress is a flag defining whether address
                              was added as additional by user
                            type: boolean
                          name:
                            description: Name contains name of the referenced object
                            type: string
                          namespace:
                            description: Namespace contains namespace of the referenced
                              object
                            type: string
                        type: object
                      type: array
                    lanes:
                      description: Lanes refers to the number of lanes used by interface
                      type: integer
                    macAddress:
                      description: MACAddress refers to the interface's hardware address
                        validation pattern
                      type: string
                    mtu:
                      description: MTU refers to the current value of interface's
                        MTU
                      type: integer
                    peer:
                      description: Peer refers to the info about device connected
                        to current switch port
                      properties:
                        chassisId:
                          description: ChassisID refers to the chassis identificator
                            - either MAC-address or system uuid validation pattern
                          type: string
                        name:
                          description: Name contains name of the referenced object
                          type: string
                        namespace:
                          description: Namespace contains namespace of the referenced
                            object
                          type: string
                        portDescription:
                          description: PortDescription refers to the advertised peer's
                            port description
                          type: string
                        portId:
                          description: PortID refers to the advertised peer's port
                            ID
                          type: string
                        systemName:
                          description: SystemName refers to the advertised peer's
                            name
                          type: string
                        type:
                          description: Type refers to the peer type
                          enum:
                          - machine
                          - switch
                          - router
                          - undefined
                          type: string
                      type: object
                    speed:
                      description: Speed refers to interface's speed
                      format: int32
                      type: integer
                    state:
                      description: State refers to the current interface's operational
                        state
                      enum:
                      - up
                      - down
                      type: string
                  required:
                  - direction
                  - fec
                  - lanes
                  - macAddress
                  - mtu
                  - speed
                  - state
                  type: object
                description: Interfaces refers to switch's interfaces configuration
                type: object
              loopbackAddresses:
                description: LoopbackAddresses refers to the switch's loopback addresses
                items:
                  description: IPAddressSpec defines interface's ip address info
                  properties:
                    address:
                      description: Address refers to the ip address value
                      type: string
                    extraAddress:
                      default: false
                      description: ExtraAddress is a flag defining whether address
                        was added as additional by user
                      type: boolean
                    name:
                      description: Name contains name of the referenced object
                      type: string
                    namespace:
                      description: Namespace contains namespace of the referenced
                        object
                      type: string
                  type: object
                type: array
              role:
                description: Role refers to switch's role
                enum:
                - spine
                - leaf
                - edge-leaf
                type: string
              subnets:
                description: Subnets refers to the switch's south subnets
                items:
                  description: SubnetSpec defines switch's subnet info
                  properties:
                    cidr:
                      description: CIDR refers to subnet CIDR validation pattern
                      type: string
                    name:
                      description: Name contains name of the referenced object
                      type: string
                    namespace:
                      description: Namespace contains namespace of the referenced
                        object
                      type: string
                    region:
                      description: Region refers to switch's region
                      properties:
                        availabilityZone:
                          description: AvailabilityZone refers to the switch's availability
                            zone
                          type: string
                        name:
                          description: Name refers to the switch's region
                          pattern: ^[a-z0-9]([-./a-z0-9]*[a-z0-9])?$
                          type: string
                      required:
                      - availabilityZone
                      - name
                      type: object
                  type: object
                type: array
              switch:
                description: SwitchState contains information about current Switch
                  object's processing state
                properties:
                  message:
                    description: Message contains a brief description of the current
                      state
                    type: string
                  state:
                    description: State is the current state of corresponding object
                      or process
                    enum:
                    - initial
                    - processing
                    - ready
                    - invalid
                    type: string
                type: object
              switchPorts:
                description: SwitchPorts refers to the number of ports excluding management
                  interfaces, loopback etc.
                type: integer
              totalPorts:
                description: TotalPorts refers to total number of ports
                type: integer
            type: object
        required:
        - spec
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
