
---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.7.0
  creationTimestamp: null
  name: machines.machine.onmetal.de
spec:
  group: machine.onmetal.de
  names:
    kind: Machine
    listKind: MachineList
    plural: machines
    singular: machine
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.health
      name: Healthy
      type: string
    - jsonPath: .status.inventory
      name: Inventory
      type: boolean
    - jsonPath: .status.oob
      name: OOB
      type: boolean
    - jsonPath: .status.network.redundancy
      name: Redundancy
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Machine - is the data structure for a Machine resource. It contains
          an aggregated information from Inventory and OOB resources.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: MachineSpec - defines the desired spec of Machine.
            properties:
              action:
                description: Action - defines desired operation on machine
                properties:
                  power_state:
                    description: PowerState - defines desired machine power state
                    pattern: ^(?:On|Reset|ResetImmediate|Off|OffImmediate)$
                    type: string
                type: object
              description:
                description: Description - summary info about machine
                type: string
              hostname:
                description: Hostname - defines machine domain name
                type: string
              identity:
                description: Identity - defines machine hardware info
                properties:
                  asset:
                    type: string
                  internal:
                    items:
                      properties:
                        name:
                          type: string
                        value:
                          type: string
                      type: object
                    type: array
                  serial_number:
                    description: SerialNumber - unique machine number
                    type: string
                  sku:
                    description: SKU - stock keeping unit. The label allows vendors
                      automatically track the movement of inventory
                    type: string
                type: object
              inventory_requested:
                description: InventoryRequested - defines if inventory requested or
                  not
                type: boolean
              location:
                description: Location - defines machine location in datacenter
                properties:
                  data_hall:
                    description: DataHall - name of room in Datacenter where machine
                      lies
                    type: string
                  datacenter:
                    description: Datacenter - name of building where machine lies
                    type: string
                  hu:
                    description: HU - is a unit of measure defined 44.45 mm
                    type: string
                  rack:
                    description: Rack - is a place for server in DataCenter
                    type: integer
                  row:
                    description: Row - switch location in rack
                    type: integer
                  shelf:
                    description: Shelf - defines place for server in Datacenter (an
                      alternative name of Rack)
                    type: string
                  slot:
                    description: Slot - defines switch location in rack (an alternative
                      name for Row)
                    type: string
                type: object
              scan_ports:
                default: false
                description: ScanPorts - trigger manual port scan
                type: boolean
            type: object
          status:
            description: MachineStatus - defines machine aggregated info.
            properties:
              health:
                description: Health - defines machine condition. "healthy" if both
                  OOB and Inventory are presented and "unhealthy" if one of them isn't
                type: string
              interfaces:
                description: Interfaces - defines machine interfaces info
                items:
                  description: Interface - defines information about machine interfaces.
                  properties:
                    ipv4:
                      description: IPv4 - defines machine IPv4 address
                      type: string
                    ipv6:
                      description: IPv6 - defines machine IPv6 address
                      type: string
                    lane:
                      description: Lane - defines number of lines per interface
                      type: integer
                    lldp_chassis_id:
                      description: LLDPChassisID - defines switch ID for chassis obtained
                        from Link Layer Discovery Protocol
                      type: string
                    lldp_port_description:
                      description: LLDPPortDescription - defines switch definition
                        obtained from Link Layer Discovery Protocol
                      type: string
                    lldp_port_id:
                      description: LLDPPortID - defines switch port ID obtained from
                        Link Layer Discovery Protocol
                      type: string
                    lldp_system_name:
                      description: LLDPSystemName - defines switch name obtained from
                        Link Layer Discovery Protocol - layer 2 neighbor discovery
                        protocol
                      type: string
                    moved:
                      description: Moved  - defines if interface was reconnected to
                        another switch or not
                      type: boolean
                    name:
                      description: Name - machine interface name
                      type: string
                    switch_uuid:
                      description: SwitchUUID - defines unique switch identification
                      type: string
                    unknown:
                      description: Unknown - defines information availability about
                        interface
                      type: boolean
                  type: object
                type: array
              inventory:
                description: Inventory - defines status, if Inventory is presented
                  or not
                type: boolean
              network:
                description: Network - defines machine network status
                properties:
                  ports:
                    description: Ports - defines number of machine ports
                    type: integer
                  redundancy:
                    description: 'Redundancy - defines machine redundancy status.
                      Available values: "Single", "High Availability" or "None"'
                    type: string
                  unknown_ports:
                    description: UnknownPorts - defines number of machine interface
                      without info
                    type: integer
                type: object
              oob:
                description: OOB define status, OOB is presented or not
                type: boolean
              orphaned:
                description: Orphaned - defines machine condition whether OOB or Inventory
                  is missing or not
                type: boolean
              reboot:
                description: Reboot - defines machine reboot status
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: ""
    plural: ""
  conditions: []
  storedVersions: []
